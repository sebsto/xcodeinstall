## TODO 

Consider using a github action for this 
https://github.com/Homebrew/actions
https://github.com/ipatch/homebrew-freecad-pg13/blob/main/.github/workflows/publish.yml
https://github.com/marketplace/actions/homebrew-bump-cask

## To release a new version.

1. Commit all other changes and push them

2. Update version number in `scripts/release-sources.sh`

3. `./scripts/release_sources.sh`

This script 
- creates a new version 
- tags the branch and push the tag 
- creates a GitHub release 
- creates a brew formula with the new release

4. `./scripts/bottle.sh` 

This script
- creates the brew bottles TAR file and the code to add to the formula 

5. `./scripts/release_binaries.sh` 

This script 
- uploads the bottles to the GitHub Release
- update the brew formula with the bootle definition 

## To undo a release 

While testing this procedure, it is useful to undo a release.

!! Destructive actions !! 

1. `./scripts/delete_release.sh`  

2. `git reset HEAD~1`

3. Reset Version file 

```zsh
SOURCE_FILE="Sources/xcodeinstall/Version.swift"

cat <<EOF >"$SOURCE_FILE"
// Generated by: scripts/version
enum Version {
    static let version = ""
}
EOF
```

4. `rm -rf ~/Library/Caches/Homebrew/downloads/*xcodeinstall-*.tar.gz`  